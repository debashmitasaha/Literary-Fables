'SELECT EXTRACT(MONTH FROM PY.PAYMENT_DATE) AS MONTH, SUM(P.NUMBER_OF_COPIES) AS MONTHLY_COUNT ' +
    'FROM PURCHASE P JOIN PAYMENT PY ON (P.TRANSACTION_ID = PY.TRANSACTION_ID) ' +
    'WHERE P.USER_ID = :user_id ' + 
    'GROUP BY EXTRACT(MONTH FROM PY.PAYMENT_DATE) ' +
    'ORDER BY MONTH';

'SELECT U.USER_ID AS U_ID,' +
                'C.NAME AS U_NAME, ' +
                'C.EMAIL AS U_EMAIL, ' +
                'MAX((SELECT NAME FROM PUBLISHED_BOOKS WHERE BOOK_ID = U.BOOK_ID)) AS BOOK_NAME ' +
         'FROM CUSTOMER C ' +
         'JOIN USER_COLLECTION U ON C.USER_ID = U.USER_ID ' +
         'WHERE C.USER_ID <> 1 '
         'GROUP BY U.USER_ID, C.NAME, C.EMAIL';


'SELECT P.NAME AS BOOK_NAME, B.START_TIME AS START_TIME, LC.BORROW_DAY_LIMIT AS DAY_LIMIT, L.NAME AS LIBRARY_NAME FROM BORROW B JOIN BORROWABLE_LIBRARY_BOOKS LB ON (B.BOOK_ID = LB.LIBRARY_BOOK_ID) JOIN PUBLISHED_BOOKS P ON (LB.PUBLISHED_BOOK_ID = P.BOOK_ID) JOIN LIBRARY L ON (LB.LIBRARY_ID = L.LIBRARY_ID) JOIN LIBRARY_CARD LC ON (B.CARD_ID = LC.CARD_ID) WHERE B.USER_ID = :user_id'

'SELECT * FROM PUBLISHED_BOOKS WHERE BOOK_ID = (SELECT PUBLISHED_BOOK_ID FROM BUYABLE_SHOP_BOOKS WHERE BOOK_ID IN (SELECT BOOK_ID FROM CART_BOOKS WHERE CART_ID = (SELECT CART_ID FROM CART WHERE USER_ID = :user_id))'

'SELECT C.NUMBER_OF_COPIES AS NUMBER_OF_COPIES, (B.SELLING_PRICE * C.NUMBER_OF_COPIES) AS PRICE, B.SHOP_ID AS SHOP_ID, C.CART_ID AS CART_ID, C.BOOK_ID AS BOOK_ID, P.NAME AS NAME, P.GENRE AS GENRE FROM CART_BOOKS C JOIN BUYABLE_SHOP_BOOKS B ON (C.BOOK_ID=B.SHOP_BOOK_ID) JOIN PUBLISHED_BOOKS P ON (B.PUBLISHED_BOOK_ID = P.BOOK_ID) WHERE C.CART_ID = (SELECT CART_ID FROM CART WHERE USER_ID = :user_id)'
                
'SELECT EXTRACT(MONTH FROM START_TIME) AS MONTH, SUM(NUMBER_OF_COPIES) AS MONTHLY_COUNT ' +
                        'FROM BORROW ' +
                        'WHERE USER_ID = :user_id ' + 
                        'GROUP BY EXTRACT(MONTH FROM START_TIME) ' +
                        'ORDER BY MONTH';     

'SELECT C.NUMBER_OF_COPIES AS N_COPIES, B.PRICE AS PRICE, (C.NUMBER_OF_COPIES*B.PRICE) AS AMOUNT FROM CART_BOOKS C JOIN BUYABLE_BOOKS B ON C.SHOP_ID = B.SHOP_ID AND C.BOOK_ID = B.BOOK_ID WHERE B.SHOP_ID = :shop_id AND C.BOOK_ID = :book_id'

'SELECT C.NUMBER_OF_COPIES AS N_COPIES, B.PRICE AS PRICE, (C.NUMBER_OF_COPIES*B.PRICE) AS AMOUNT FROM CART_BOOKS C JOIN BUYABLE_BOOKS B ON C.SHOP_ID = B.SHOP_ID AND C.BOOK_ID = B.BOOK_ID WHERE B.SHOP_ID = :shop_id AND C.BOOK_ID = :book_id'

'SELECT * FROM BUYABLE_BOOKS WHERE BOOK_ID IN (SELECT BOOK_ID FROM CART_BOOKS WHERE CART_ID = (SELECT CART_ID FROM CART WHERE USER_ID = :user_id))'

'SELECT SUM(NUMBER_OF_COPIES) AS BC FROM BORROW GROUP BY USER_ID,LIBRARY_ID HAVING USER_ID = :user_id AND LIBRARY_ID = :library_id'
            
'SELECT B.LIBRARY_ID AS LIBRARY_ID, B.LIBRARY_BOOK_ID AS BOOK_ID, B.STATUS AS STATUS, P.NAME AS NAME, P.GENRE AS GENRE, B.NUMBER_OF_COPIES AS NUMBER_OF_COPIES FROM BORROWABLE_LIBRARY_BOOKS B JOIN PUBLISHED_BOOKS P ON B.PUBLISHED_BOOK_ID = P.BOOK_ID WHERE B.LIBRARY_ID = :library_id'

'SELECT PB.NAME AS NAME, PB.GENRE AS GENRE, C.COPIES AS COPY_NO, (B.SELLING_PRICE) AS PRICE,C.BOOK_ID AS BOOK_ID,B.SHOP_ID AS SHOP_ID FROM USER_COLLECTION C JOIN BUYABLE_SHOP_BOOKS B ON(C.BOOK_ID = B.SHOP_BOOK_ID) JOIN PUBLISHED_BOOKS PB ON (PB.BOOK_ID = B.PUBLISHED_BOOK_ID) WHERE C.USER_ID = :user_id'

'SELECT P.NAME AS NAME, B.BOOK_ID AS BOOK_ID, B.RETURN_TIME AS RET_DATE,B.NUMBER_OF_COPIES AS NUMBER_OF_COPIES,BL.LIBRARY_ID AS LIBRARY_ID, B.START_TIME AS START_TIME, (B.START_TIME + L.BORROW_DAY_LIMIT) AS RETURN_DAY_LIMIT, SYSDATE AS TODAYS_DATE, B.DAYS_REMAINING AS DAYS_REMAINING, B.LATE_FEE AS LATE_FEE FROM BORROW B JOIN LIBRARY_CARD L ON (B.CARD_ID = L.CARD_ID) JOIN BORROWABLE_LIBRARY_BOOKS BL ON (BL.LIBRARY_BOOK_ID = B.BOOK_ID) JOIN PUBLISHED_BOOKS P ON (BL.PUBLISHED_BOOK_ID = P.BOOK_ID) WHERE B.USER_ID = :user_id'

'SELECT SUM(P.NUMBER_OF_COPIES) AS BOOK_COUNT, B.NAME AS SHOP_NAME FROM PURCHASE P JOIN BOOKSHOP B ON (P.SHOP_ID = B.SHOP_ID) WHERE P.USER_ID = :user_id GROUP BY P.SHOP_ID, B.NAME ORDER BY P.SHOP_ID'

'SELECT EXTRACT(MONTH FROM PY.PAYMENT_DATE) AS MONTH, SUM(P.PRICE) AS MONTHLY_SPENDING ' +
        'FROM PURCHASE P JOIN PAYMENT PY ON (P.TRANSACTION_ID = PY.TRANSACTION_ID) ' +
        'WHERE P.USER_ID = :user_id ' + 
        'GROUP BY EXTRACT(MONTH FROM PY.PAYMENT_DATE) ' +
        'ORDER BY MONTH';

'SELECT PB.NAME AS NAME, PB.GENRE AS GENRE, P.NUMBER_OF_COPIES AS COPY_NO, (P.PRICE / P.NUMBER_OF_COPIES) AS PRICE, P.BOOK_ID AS BOOK_ID, P.SHOP_ID AS SHOP_ID FROM PURCHASE P JOIN BUYABLE_SHOP_BOOKS B ON (P.BOOK_ID = B.SHOP_BOOK_ID) JOIN PUBLISHED_BOOKS PB ON (PB.BOOK_ID = B.PUBLISHED_BOOK_ID) WHERE USER_ID = :user_id AND PB.NAME = :OfferedBookName'

'SELECT DISTINCT E.EXCHANGE_ID AS EXCHANGE_ID , E. PROFIT AS PROFIT, C.USER_ID AS USER_ID,C.EMAIL AS EMAIL, C.NAME AS USER_NAME,B.NAME AS SHOP_NAME, (SELECT NAME FROM PUBLISHED_BOOKS P WHERE P.BOOK_ID = E.RETURNED_BOOK_ID ) AS OFFERED_BOOK_NAME ,(SELECT NAME FROM PUBLISHED_BOOKS P WHERE P.BOOK_ID = E.EXCHANGED_BOOK_ID ) AS EXCHANGED_BOOK_NAME,E.EXCHANGED_BOOK_PRICE,E.OFFERED_BOOK_REAL_PRICE FROM EXCHANGE E JOIN BOOKSHOP B ON (E.SHOP_ID = B.SHOP_ID) JOIN BUYABLE_SHOP_BOOKS S ON (S.SHOP_ID = B.SHOP_ID) JOIN CUSTOMER C ON(C.USER_ID=E.USER_ID)  WHERE E.SHOP_ID = :shopID';

`SELECT P.NAME AS NAME, P.GENRE AS GENRE, B.SELLING_PRICE AS PRICE, B.NUMBER_OF_COPIES AS NUMBER_OF_COPIES, B.SHOP_BOOK_ID AS BOOK_ID, B.SHOP_ID AS SHOP_ID FROM BUYABLE_SHOP_BOOKS B JOIN PUBLISHED_BOOKS P ON (B.PUBLISHED_BOOK_ID = P.BOOK_ID) JOIN AUTHOR A ON(A.AUTHOR_ID = P.AUTHOR_ID) WHERE P.NAME LIKE '%${Name}%' AND P.GENRE LIKE '%${Genre}%' AND A.NAME LIKE '%${Author}%' AND WHERE B.SELLING_PRICE BETWEEN :minPrice AND :maxPrice  `

'SELECT (SELECT P.NAME FROM PUBLISHED_BOOKS P WHERE P.BOOK_ID = E.EXCHANGED_BOOK_ID )OFFERED_NAME,(SELECT C.NAME FROM CUSTOMER C WHERE C.USER_ID=E.USER_ID)USER_NAME FROM SUCCESSFUL_EXCHANGE E WHERE EXCHANGED_BOOK_ID = :offered_book_id AND  USER_ID <> :user_id'

`SELECT P.NAME AS NAME, P.GENRE AS GENRE, B.NUMBER_OF_COPIES AS NUMBER_OF_COPIES, B.PUBLISHED_BOOK_ID AS BOOK_ID FROM BORROWABLE_LIBRARY_BOOKS  B JOIN PUBLISHED_BOOKS P ON (B.PUBLISHED_BOOK_ID = P.BOOK_ID) JOIN AUTHOR A ON(A.AUTHOR_ID = P.AUTHOR_ID) WHERE P.NAME LIKE '%${name}%' AND P.GENRE LIKE '%${genre}%' AND A.NAME LIKE '%${author}%' `
                                                          